<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1e1e2f; 
      color: white;
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(to right, #2c3e50, #34495e);
      text-align: center;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #2c2c3c;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #444;
    }

    th {
      background-color: #3a3a4a;
    }

    input[type="text"] {
      width: 100%;
      padding: 6px;
      border-radius: 4px;
      border: none;
    }

    button {
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .block-btn {
      background-color: #e74c3c;
      color: white;
    }

    .unblock-btn {
      background-color: #2ecc71;
      color: white;
    }
  </style>
</head>
<body>

<header>
  <h1>üõ† –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å EpicRoleplay</h1>
</header>

<div class="container">
  <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
  <table>
    <thead>
      <tr>
        <th>–ù–∏–∫–Ω–µ–π–º / Email</th>
        <th>IP-–∞–¥—Ä–µ—Å</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–ü—Ä–∏—á–∏–Ω–∞ –±–∞–Ω–∞</th>
        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
      </tr>
    </thead>
    <tbody id="user-list"></tbody>
  </table>
</div>

<script>
  function loadUsers() {
    const users = JSON.parse(localStorage.getItem('er_users') || '{}');
    const list = document.getElementById('user-list');
    list.innerHTML = '';

    for (const user in users) {
      const userData = users[user];
      const tr = document.createElement('tr');

      const banReason = userData.banReason || '';
      const ip = userData.ip ? userData.ip : '–ù–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω';

      tr.innerHTML = `
        <td>${user}</td>
        <td>${ip}</td>
        <td>${userData.blocked ? 'üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω' : '‚úÖ –ê–∫—Ç–∏–≤–µ–Ω'}</td>
        <td><input type="text" id="ban-reason-${user}" value="${banReason}" placeholder="–ü—Ä–∏—á–∏–Ω–∞ –±–∞–Ω–∞" /></td>
        <td>
          ${userData.blocked 
            ? `<button class="unblock-btn" onclick="toggleBlock('${user}', false)">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>`
            : `<button class="block-btn" onclick="toggleBlock('${user}', true)">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>`}
        </td>
      `;
      list.appendChild(tr);
    }
  }

  function toggleBlock(username, isBlocked) {
    let users = JSON.parse(localStorage.getItem('er_users') || '{}');
    const reasonInput = document.getElementById(`ban-reason-${username}`);
    const reason = reasonInput ? reasonInput.value.trim() : '';

    if (isBlocked && !reason) {
      alert("‚ùå –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–∞–Ω–∞");
      return;
    }

    if (users[username]) {
      users[username].blocked = isBlocked;
      users[username].banReason = isBlocked ? reason : '';
      localStorage.setItem('er_users', JSON.stringify(users));
      loadUsers();
    }
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  window.onload = loadUsers;
</script>

</body>
</html>
